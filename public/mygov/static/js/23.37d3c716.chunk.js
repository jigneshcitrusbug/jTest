(this["webpackJsonputah-brands-inspection"]=this["webpackJsonputah-brands-inspection"]||[]).push([[23],{1634:function(e,a,t){"use strict";t.r(a);var n=t(405),l=t(406),i=t(408),r=t(407),c=t(0),o=t.n(c),s=function(e){Object(i.a)(t,e);var a=Object(r.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).state={},l}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.offline?"CloudyCam is offline! Your images will be saved now and then uploaded to your Cloudinary Media Library once your Internet connection is back up.":"Take a picture and it will be uploaded to your Cloudinary Media Library.";return o.a.createElement("div",{className:"notify ".concat(this.props.offline&&"danger")},o.a.createElement("p",null,o.a.createElement("em",null,e)))}}]),t}(c.Component),m=t(436),u=t.n(m),d=t(451),p=t(598),v=t(491),h=t.n(v),f=function(e){Object(i.a)(t,e);var a=Object(r.a)(t);function t(){var e;return Object(n.a)(this,t),(e=a.call(this)).setupCamera=function(){e.webcam.setup().catch((function(){alert("Error getting access to your camera")}))},e.captureImage=Object(d.a)(u.a.mark((function a(){var t;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t=e.webcam.takeBase64Photo({type:"jpeg",quality:1}),e.setState({captured:!0,capturedImage:t.base64}),e.webcam.stopCamera();case 3:case"end":return a.stop()}}),a)}))),e.discardImage=function(){e.setState({captured:!1,capturedImage:null}),e.setupCamera()},e.uploadImage=function(){if(e.props.offline){console.log("you're using in offline mode sha");var a=Math.random().toString(36).substr(2,5);localStorage.setItem("".concat("cloudy_pwa_").concat(a),e.state.capturedImage),alert("Image saved locally, it will be uploaded to your Cloudinary media library once internet connection is detected"),e.discardImage()}else e.setState({uploading:!0}),h.a.post("https://api.cloudinary.com/v1_1/taglinecloudinary/image/upload",{file:e.state.capturedImage,upload_preset:"taglinePreset"}).then((function(a){return e.checkUploadStatus(a)})).catch((function(a){alert("Sorry, we encountered an error uploading your image ".concat(a)),e.setState({uploading:!1})}))},e.findLocalItems=function(e){var a,t=[];for(a in localStorage)if(localStorage.hasOwnProperty(a)&&(a.match(e)||!e&&"string"===typeof a)){var n=localStorage.getItem(a);t.push({key:a,val:n})}return t},e.checkUploadStatus=function(a){e.setState({uploading:!1}),200===a.status?(alert("Image Uploaded to Cloudinary Media Library"),e.discardImage()):alert("Sorry, we encountered an error uploading your image")},e.batchUploads=function(){var a=e.findLocalItems(/^cloudy_pwa_/);if(a.length>0){e.setState({uploading:!0});for(var t=0;t<a.length;t++)h.a.post("https://api.cloudinary.com/v1_1/taglinecloudinary/image/upload",{file:a[t].val,upload_preset:"ml_default"}).then((function(a){return e.checkUploadStatus(a)})).catch((function(e){alert(e)}));e.setState({uploading:!1}),alert("All saved images have been uploaded to your Cloudinary Media Library")}},e.webcam=null,e.state={capturedImage:null,captured:!1,uploading:!1},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.canvasElement=document.createElement("canvas"),this.webcam=new p.a(document.getElementById("webcam"),this.canvasElement),this.setupCamera()}},{key:"componentDidUpdate",value:function(e){this.props.offline||!0!==e.offline||this.batchUploads()}},{key:"componentWillUnmount",value:function(){this.webcam.stopCamera()}},{key:"render",value:function(){var e=this.state.capturedImage?o.a.createElement("img",{src:this.state.capturedImage,alt:"captured",width:"350"}):o.a.createElement("span",null),a=this.state.captured?o.a.createElement("div",{className:"group-capture-btn"},o.a.createElement("button",{className:"deleteButton btn btn-secondary",onClick:this.discardImage}," Delete Photo "),o.a.createElement("button",{className:"captureButton btn btn-primary",onClick:this.uploadImage}," Upload Photo ")):o.a.createElement("button",{className:"captureButton btn btn-secondary btm-mx-50",onClick:this.captureImage}," Take Picture "),t=this.state.uploading?o.a.createElement("div",null,o.a.createElement("p",null," Uploading Image, please wait ... ")):o.a.createElement("span",null);return o.a.createElement("div",null,t,o.a.createElement("video",{autoPlay:!0,playsInline:!0,muted:!0,id:"webcam",width:"100%",height:"200",style:{display:this.state.capturedImage?"none":"inline"}}),o.a.createElement("br",null),o.a.createElement("div",{className:"imageCanvas"},e),a)}}]),t}(c.Component),b=t(427),g=function(e){Object(i.a)(t,e);var a=Object(r.a)(t);function t(){var e;return Object(n.a)(this,t),(e=a.call(this)).handleOpenNavBar=function(){e.setState({open:!e.state.open})},e.state={offline:!1,open:!1},e}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("online",(function(){e.setState({offline:!1})})),window.addEventListener("offline",(function(){e.setState({offline:!0})}))}},{key:"componentDidUpdate",value:function(){var e=!navigator.onLine;this.state.offline!==e&&this.setState({offline:e})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{id:"st-container",className:this.state.open?"st-container st-effect-1 st-menu-open":"wrapper dashboard-wrapper st-container"},o.a.createElement(b.a,{header:"Camera Sandbox",openNavBar:this.handleOpenNavBar,open:this.state.open}),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(s,{offline:this.state.offline}),o.a.createElement(f,{offline:this.state.offline}))))}}]),t}(c.Component);a.default=g},418:function(e,a,t){e.exports=t.p+"static/media/logo.40b45ea8.svg"},427:function(e,a,t){"use strict";var n=t(405),l=t(406),i=t(408),r=t(407),c=t(0),o=t.n(c),s=t(418),m=t.n(s),u=t(428),d=t.n(u),p=t(91),v=function(e){Object(i.a)(t,e);var a=Object(r.a)(t);function t(){var e;Object(n.a)(this,t);for(var l=arguments.length,i=new Array(l),r=0;r<l;r++)i[r]=arguments[r];return(e=a.call.apply(a,[this].concat(i))).state={open:!1},e}return Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("header",null,o.a.createElement("div",{className:"header-div header-top-root clearfix"},o.a.createElement("div",{className:"inner-top-header-div clearfix"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-lg-12 col-md-12"},o.a.createElement("div",{className:"header-container"},o.a.createElement("div",{className:"logo-div"},o.a.createElement("a",{className:"logo_link clearfix",href:"/"},o.a.createElement("img",{src:m.a,className:"img-fluid logo_img main-logo",alt:"logo"}))),o.a.createElement("div",{className:"center-nav-content-div display-desktop-center",id:"title-header-top"},o.a.createElement("div",{className:"title-div"},o.a.createElement("h1",null,this.props.header))),o.a.createElement("div",{className:"nav-right-div"},o.a.createElement("div",{className:"menu-trigger"},o.a.createElement("button",{className:"btn btn-menu",id:"btnopen-menu",onClick:this.props.openNavBar},o.a.createElement("img",{src:d.a,className:"menu-icon",alt:"menu"}))),o.a.createElement("div",{className:"navigation-menu"},o.a.createElement("nav",{className:"st-menu st-effect-1 ",id:"menu-1"},o.a.createElement("div",{className:"closemenu-div"},o.a.createElement("button",{className:"menu-close-btn",id:"closemenu",onClick:this.props.openNavBar},o.a.createElement("i",{className:"fe fe-x"}," "))),o.a.createElement("ul",{className:"ul-list"},o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/"},"Dashboard")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/inspection"},"Brand Inspection/List")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/livestock"}," Live Stock")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/horse-permanent-travel-permit"},"Horse Permanent Travel Permit")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/pre-sale-horse-permanent-travel-permit"},"Pre-Sale Horse Brand Inspection Form")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/counter"},"Counter")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/camera"},"Camera")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/gallery"},"Gallery")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/sketch"},"Sketch")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/bluetooth"},"Bluetooth")),o.a.createElement("li",null,o.a.createElement(p.b,{className:"nav-link",to:"/price-calculator"},"Price Calculator")))))))))))),o.a.createElement("div",{className:"navigation-tabs-root",style:{display:"block"}},o.a.createElement("ul",{className:"nav nav-tabs"},o.a.createElement("li",{className:"nav-item plan-nav-item"},o.a.createElement("a",{className:"nav-link active","data-toggle":"tab",href:"#plan-tab"}," ",o.a.createElement("span",{className:"round-outline plan-round-outline"})," Plan")),o.a.createElement("li",{className:"nav-item produce-nav-item"},o.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#produce-tab"}," ",o.a.createElement("span",{className:"round-outline produce-round-outline"})," Produce")),o.a.createElement("li",{className:"nav-item publish-nav-item"},o.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#publish-tab"}," ",o.a.createElement("span",{className:"round-outline publish-round-outline"})," Publish")),o.a.createElement("li",{className:"nav-item track-nav-item"},o.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#track-tab"}," ",o.a.createElement("span",{className:"round-outline track-round-outline"})," Track")))))}}]),t}(c.Component);a.a=v},428:function(e,a,t){e.exports=t.p+"static/media/menu-white.2e203ecb.svg"},436:function(e,a,t){e.exports=t(175)},451:function(e,a,t){"use strict";function n(e,a,t,n,l,i,r){try{var c=e[i](r),o=c.value}catch(s){return void t(s)}c.done?a(o):Promise.resolve(o).then(n,l)}function l(e){return function(){var a=this,t=arguments;return new Promise((function(l,i){var r=e.apply(a,t);function c(e){n(r,l,i,c,o,"next",e)}function o(e){n(r,l,i,c,o,"throw",e)}c(void 0)}))}}t.d(a,"a",(function(){return l}))},598:function(e,a,t){"use strict";t.d(a,"a",(function(){return o}));var n=t(436),l=t.n(n),i=t(451),r=t(405),c=t(406),o=function(){function e(a,t){Object(r.a)(this,e),this.webcamElement=a,this.canvasElement=t}return Object(c.a)(e,[{key:"adjustVideoSize",value:function(e,a){var t=e/a;e>=a?this.webcamElement.width=t*this.webcamElement.height+100:this.webcamElement.height=this.webcamElement.width/t+150}},{key:"stopCamera",value:function(){this.webcamElement.srcObject&&this.webcamElement.srcObject.getVideoTracks().forEach((function(e){return e.stop()}))}},{key:"setup",value:function(){var e=Object(i.a)(l.a.mark((function e(){var a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){void 0!==navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then((function(t){"srcObject"in a.webcamElement?a.webcamElement.srcObject=t:a.webcamElement.src=window.URL.createObjectURL(t),a.webcamElement.addEventListener("loadeddata",Object(i.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.adjustVideoSize(a.webcamElement.videoWidth,a.webcamElement.videoHeight),e();case 2:case"end":return t.stop()}}),t)}))),!1)})):t()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_drawImage",value:function(){var e=this.webcamElement.videoWidth,a=this.webcamElement.videoHeight,t=this.canvasElement.getContext("2d");return this.canvasElement.width=e,this.canvasElement.height=a,t.drawImage(this.webcamElement,0,0,e,a),{imageHeight:a,imageWidth:e}}},{key:"takeBlobPhoto",value:function(){var e=this,a=this._drawImage(),t=a.imageWidth,n=a.imageHeight;return new Promise((function(a,l){e.canvasElement.toBlob((function(e){a({blob:e,imageHeight:n,imageWidth:t})}))}))}},{key:"takeBase64Photo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"png",quality:1},a=e.type,t=e.quality,n=this._drawImage(),l=n.imageHeight,i=n.imageWidth,r=this.canvasElement.toDataURL("image/"+a,t);return{base64:r,imageHeight:l,imageWidth:i}}}]),e}()}}]);
//# sourceMappingURL=23.37d3c716.chunk.js.map